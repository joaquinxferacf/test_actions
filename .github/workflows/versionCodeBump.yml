name: VersionCode Bump

on: [workflow_dispatch]

jobs:
  builder:
    runs-on: ubuntu-latest

    steps:
    
      - name: bump version code
        env:
          SUM: $((${{ vars.VERSION_CODE }}+1))
        run: |
          echo "VERSION_CODE=${{ env.SUM }}"
          echo "VERSION_CODE=${{ env.SUM }}" >> $GITHUB_ENV
          
      - name: echo version code
        run: |
          echo ${{ env.VERSION_CODE }}
          
      - name: update to github variables
        run: |
          curl -L \
          -X PATCH \
          -H "Accept: application/vnd.github+json" \
          -H "Authorization: Bearer $GITHUB_TOKEN"\
          -H "X-GitHub-Api-Version: 2022-11-28" \
          https://api.github.com/repos/joaquinxferacf/test_actions/actions/variables/VERSION_CODE \
          -d '{"name":"VERSION_CODE","value":"${{ env.VERSION_CODE }}"}'

        
